%!TEX root=template.tex

%% ----------------------------------------------------------------------------
%%  NOVATHESIS — novathesis.cls
%% ----------------------------------------------------------------------------
%%
%% Version 7.9.1 (2026-01-04)
%% Copyright (C) 2004-26 by João M. Lourenço <joao.lourenco@fct.unl.pt>
%% Departamento de Informática (www.di.fct.unl.pt)
%% Faculdade de Ciências e Tecnologia (www.fct.unl.pt)
%% Universidade NOVA de Lisboa (www.unl.pt)
%%
%% BUGS and SUGGESTIONS: please submit an issue at the project web page
%%      at: https://github.com/joaomlourenco/novathesis/
%%
%% HELP: please DO NOT SEND ME EMAILS about LaTeX or the NOVAthesis template
%%       please ask for help at GitHub Discussions page at
%%          https://github.com/joaomlourenco/novathesis/discussions
%%      or in the subreddit r/novathesis
%%          https://www.reddit.com/r/novathesis/
%%
%% AUTHOR @github:
%%      - https://github.com/joaomlourenco (joaomlourenco)
%%
%% CONTRIBUTORS @github:
%%      - https://github.com/joaomlourenco/novathesis/wiki#help-with-the-project-patches-and-new-features
%%
%% DONATIONS:
%%      If you think this template really helped you while writing your thesis, then
%%          1. Go to the project web page and giv it a star (on the top-right)
%%          2. Make a small donation using the URL below
%%                    https://www.paypal.com/donate/?hosted_button_id=8WA8FRVMB78W8
%%             We will keep a list thanking to all the identified donors that identify
%%             themselves in the “Add special instructions to the seller:” box.
%%
%% CITATION:
%%      If you use this template, please be kind and \cite{novathesis-manual}
%%      somewhere in your document.
%%
%% This work is licensed under the
%% The LaTeX project public license (LPPL), version 1.3c
%% To view a copy of this license, visit
%% https://www.latex-project.org/lppl/lppl-1-3c/
%%
%% ----------------------------------------------------------------------------
%%
%% ██████   ██       ███████   █████    █████   ███████
%% ██   ██  ██       ██       ██   ██  ██       ██
%% ██████   ██       █████    ███████   █████   █████
%% ██       ██       ██       ██   ██       ██  ██
%% ██       ███████  ███████  ██   ██  ██████   ███████
%%
%% █████     █████            ███    ██   █████   ███████
%% ██   ██  ██   ██           ████   ██  ██   ██     ██
%% ██   ██  ██   ██           ██ ██  ██  ██   ██     ██
%% ██   ██  ██   ██           ██  ██ ██  ██   ██     ██
%% █████     █████            ██   ████   █████      ██
%%
%%  █████   ██   ██   █████   ███    ██   █████   ███████
%% ██       ██   ██  ██   ██  ████   ██  ██       ██
%% ██       ███████  ███████  ██ ██  ██  ██  ███  █████
%% ██       ██   ██  ██   ██  ██  ██ ██  ██   ██  ██
%%  █████   ██   ██  ██   ██  ██   ████   █████   ███████
%%
%% ███████  ██   ██  ███    █████          ███████  ███   ██       ███████
%%    ██    ██   ██   ██   ██              ██        ██   ██       ██
%%    ██    ███████   ██    █████          █████     ██   ██       █████
%%    ██    ██   ██   ██        ██         ██        ██   ██       ██
%%    ██    ██   ██  ███   ██████          ██       ███   ███████  ███████
%% 
%% ----------------------------------------------------------------------------
%%
%% If you feel you need to change this file, you are doing something wrong!
%%
%% Please ask for help at GitHub Discussions page at
%%          https://github.com/joaomlourenco/novathesis/discussions
%%      or in the subreddit r/novathesis
%%          https://www.reddit.com/r/novathesis/

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% CHECK IF USING LUALATEX OR XELATEX
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \typeout{FONTENCS=\@fontencs}\FONTENCS
% \iftutex  % xelatex or lualatex
%   \RequirePackage[no-math]{fontspec}%
%   \defaultfontfeatures{Ligatures=TeX}
% \else% pdflatex
%   \RequirePackage[\@fontencs]{fontenc}    % Use new T1 fonts
%   % \RequirePackage[utf8]{inputenc}    % Format for the input file(s), see the "enc" option
% \fi

% --------------------------------------------------------
% BABEL STUFF
% \options{/@nt/lang/shorttolong=\@LANG@MAIN}%
\def\@LANG@LOADED{}
\def\@langs@loaded@sep{}
\newcommand*{\@nt@setlangloaded}[1]{%
      % \typeout{LL=#1}\LL
      \if\instring{,#1,}{,\@LANG@LOADED,}\else%
        \IfFileExists{\DIRNTFILES/Strings/strings-#1.ldf}%
                     {\eappto{\@LANG@LOADED}{\@langs@loaded@sep#1}\def\@langs@loaded@sep{,}}%
                      {\ClassError{novathesis}{File not found: “\DIRNTFILES/Strings/strings-#1.ldf” file!}%
                                  {Add a file with the translations for this language.}}%
      \fi%
}

\@for\myi:=\expanded{\@LANG@COVER,\@LANG@COPYRIGHT,\@LANG@MAIN,%
                     \theabstractorder(\@LANG@MAIN)}\do{\@nt@setlangloaded{\myi}}
\optionlistdo{/novathesis/lang/extra}{\@nt@setlangloaded{##1}}%


\babeladjust{
  autoload.bcp47 = on
}
% \PassOptionsToPackage{main=\@LANG@MAIN@LONG}{babel}
\babelprovide[main,import]{\expanded{\@LANG@MAIN@LONG}}
\@for\myi:=\expanded{\@LANG@LOADED}\do{%
  % \typeout{BABELLANG=\myi \thelanglong(\myi)}\BABELLANG%
  \babelprovide[import]{\expanded{\thelanglong(\myi)}}%
}%

% --------------------------------------------------------
% FIX BABEL TRANSLATION
% \RequirePackage{babel}      % Support for multilingual documents
% \RequirePackage{translator} % Support month name translations for pgfcalendar
\ntselectlang{\@LANG@MAIN}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% FIX BABEL
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{fix-babel.tex}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Include strings for all the languages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\@for\myi:=\expanded{\@LANG@LOADED}\do{%
  \InputIfFileExists{\DIRNTFILES/Strings/strings-\myi.ldf}%
                    {}%
                    {\ClassError{novathesis}
                                {File not found: “\DIRNTFILES/Strings/strings-#1.ldf” file!}%
                                {Add a file with the translations for this language.}}%
}%


\bkmstring(1-1)={\thebkmstring(cover,\@LANG@MAIN)}
\bkmstring(1-2)={\thebkmstring(incover,\@LANG@MAIN)}
\bkmstring(2-1)={\thebkmstring(frontpage,\@LANG@MAIN)}
\bkmstring(2-2)={\thebkmstring(infrontpage,\@LANG@MAIN)}
\bkmstring(N-1)={\thebkmstring(inbackcover,\@LANG@MAIN)}
\bkmstring(N-2)={\thebkmstring(backcover,\@LANG@MAIN)}
\bkmstring(spine)={\thebkmstring(spine,\@LANG@MAIN)}


\options{/@nt/lang/loaded/.expanded=\@LANG@LOADED}

\def\@fontencs{}
\def\@fontencs@sep{}
\@for\myi:=\@LANG@LOADED\do{
  \options{/@nt/fontenc=\myi}
  \if\instring{,\option{/@nt/fontenc},}{,\@fontencs,}%
  \else\eappto{\@fontencs}{\@fontencs@sep\option{/@nt/fontenc}}\def\@fontencs@sep{,}%
  \fi%
}



%--------------------------------
% TIKZ
\usetikzlibrary{calc}

%%%%% Fine tuning of typesetting
\ifxeorlua{%
    % \newcommand{\textls}[2][25]{{\addfontfeature{LetterSpace=\the\numexpr#1/9\relax}#2}}
}{% pdflatex
  % \RequirePackage[%
  %   babel=true,
  %   activate={true,nocompatibility},  % activate={true,nocompatibility} - activate protrusion and expansion
  %   final,            % final - enable microtype; use "draft" to disable
  %   tracking=true,    % tracking=true - activate this technique
  %   kerning=true,     % kerning=true - activate this technique
  %   spacing=true,     % spacing=true - activate this technique
  %   factor=1100,      % factor=1100 - add 10% to the protrusion amount (default is 1000)
  %   stretch=10,       % stretch=10 - reduce stretchability (default is 20)
  %   shrink=10,        % shrink=10 - reduce shrinkability (default is 20)
  % ]{microtype}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
