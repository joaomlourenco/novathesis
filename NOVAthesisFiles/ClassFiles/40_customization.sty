%!TEX root=template.tex

%% ----------------------------------------------------------------------------
%%  NOVATHESIS — novathesis.cls
%% ----------------------------------------------------------------------------
%%
%% Version 7.9.1 (2026-01-04)
%% Copyright (C) 2004-26 by João M. Lourenço <joao.lourenco@fct.unl.pt>
%% Departamento de Informática (www.di.fct.unl.pt)
%% Faculdade de Ciências e Tecnologia (www.fct.unl.pt)
%% Universidade NOVA de Lisboa (www.unl.pt)
%%
%% BUGS and SUGGESTIONS: please submit an issue at the project web page
%%      at: https://github.com/joaomlourenco/novathesis/
%%
%% HELP: please DO NOT SEND ME EMAILS about LaTeX or the NOVAthesis template
%%       please ask for help at GitHub Discussions page at
%%          https://github.com/joaomlourenco/novathesis/discussions
%%      or in the subreddit r/novathesis
%%          https://www.reddit.com/r/novathesis/
%%
%% AUTHOR @github:
%%      - https://github.com/joaomlourenco (joaomlourenco)
%%
%% CONTRIBUTORS @github:
%%      - https://github.com/joaomlourenco/novathesis/wiki#help-with-the-project-patches-and-new-features
%%
%% DONATIONS:
%%      If you think this template really helped you while writing your thesis, then
%%          1. Go to the project web page and giv it a star (on the top-right)
%%          2. Make a small donation using the URL below
%%                    https://www.paypal.com/donate/?hosted_button_id=8WA8FRVMB78W8
%%             We will keep a list thanking to all the identified donors that identify
%%             themselves in the “Add special instructions to the seller:” box.
%%
%% CITATION:
%%      If you use this template, please be kind and \cite{novathesis-manual}
%%      somewhere in your document.
%%
%% This work is licensed under the
%% The LaTeX project public license (LPPL), version 1.3c
%% To view a copy of this license, visit
%% https://www.latex-project.org/lppl/lppl-1-3c/
%%
%% ----------------------------------------------------------------------------
%%
%% ██████   ██       ███████   █████    █████   ███████
%% ██   ██  ██       ██       ██   ██  ██       ██
%% ██████   ██       █████    ███████   █████   █████
%% ██       ██       ██       ██   ██       ██  ██
%% ██       ███████  ███████  ██   ██  ██████   ███████
%%
%% █████     █████            ███    ██   █████   ███████
%% ██   ██  ██   ██           ████   ██  ██   ██     ██
%% ██   ██  ██   ██           ██ ██  ██  ██   ██     ██
%% ██   ██  ██   ██           ██  ██ ██  ██   ██     ██
%% █████     █████            ██   ████   █████      ██
%%
%%  █████   ██   ██   █████   ███    ██   █████   ███████
%% ██       ██   ██  ██   ██  ████   ██  ██       ██
%% ██       ███████  ███████  ██ ██  ██  ██  ███  █████
%% ██       ██   ██  ██   ██  ██  ██ ██  ██   ██  ██
%%  █████   ██   ██  ██   ██  ██   ████   █████   ███████
%%
%% ███████  ██   ██  ███    █████          ███████  ███   ██       ███████
%%    ██    ██   ██   ██   ██              ██        ██   ██       ██
%%    ██    ███████   ██    █████          █████     ██   ██       █████
%%    ██    ██   ██   ██        ██         ██        ██   ██       ██
%%    ██    ██   ██  ███   ██████          ██       ███   ███████  ███████
%% 
%% ----------------------------------------------------------------------------
%%
%% If you feel you need to change this file, you are doing something wrong!
%%
%% Please ask for help at GitHub Discussions page at
%%          https://github.com/joaomlourenco/novathesis/discussions
%%      or in the subreddit r/novathesis
%%          https://www.reddit.com/r/novathesis/


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% DEFINITIONS FOR THE REMINDER OF CUSTOMIZATION STUFF
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ExplSyntaxOn

%============================================================
% Utility for commands \ntSOMETHIG(key){value}
%============================================================


% 2. Internal Logic
% star (*)        <= only define if undefined
% MemStore        <- the name of the MemStore to use
% ID              <= e.g., "pt"
% Attribute       <= e.g., "The name of the department"
\cs_new_protected:Npn \__nt_command:nnnn #1 #2 #3 #4
  {
    % Logic Branching
    \bool_if:nTF { #1 }
      {
        % Starred version: Only set if NOT already defined
        % We check if the 'department' data for this ID is empty/unset
        \__mem_if_unset:nnT { #2 } { #3 }
          { 
            \MemSet { #2 } { #3 } { #4 } 
          }
      }
      {
        % Unstarred version: Set/Overwrite regardless
        \MemSet { #2 } { #3 } { #4 }
      }
  }

% 3. Generate expansion variants
\cs_generate_variant:Nn \__nt_command:nnnn { neee }





%============================================================
% Department — e.g., Computer Science
%============================================================

% 1. The Public Command
% s = star (*)                 <= only define if undefined
% r() = required ID in parens  <= the lang code
% O{} = Department of          <= prefix for the department name, e.g, “Department of”
% m = mandatory value          <= the name of the department
\NewMemStore{Department}
\NewMemStore{DepartmentFull}
\NewDocumentCommand{\Department}{ s r() o m }
  {
    % 1. Store the base department name (Mandatory argument #4)
    \__nt_command:neee { #1 } { Department } { #2 } { #4 }

    % 2. Handle the Prefix (Optional argument #3)
    \IfNoValueTF { #3 }
      {
        % If no optional argument, use the default "Department of" from .ldf
        % Note: \departmentofString is the key used in the .ldf files
        \tl_set:Ne \l_tmpa_tl { \thedepartmentofString(#2) \\ }
      }
      {
        % If optional argument provided, use it as the prefix
        \tl_set:Ne \l_tmpa_tl { #3 \\ }
      }

    % 3. Store the Full Department string (Prefix + Name)
    \__nt_command:neee { #1 } { DepartmentFull } { #2 } { \l_tmpa_tl #4 }
    \typeout{GetDepartmentFull=\GetDepartmentFull(\@LANG@COVER)}
  }

%============================================================
% Major field — Degree name
%============================================================

% 1. The Public Command
% s = star (*)                 <= only define if undefined
% r() = required ID in parens  <= the lang code
% O{} = Department of          <= prefix for the department name, e.g, “Department of”
% m = mandatory value          <= the major stufy field (e.g., Computer Science)
\NewMemStore{MajorField}
\NewDocumentCommand{\MajorField}{ s r() m }
  {
    % We pass the star status (boolean) and expanded arguments to the internal logic
    \__nt_command:neee { #1 } { MajorField } { #2 } { #3 }
  }
\let\DegreeName\MajorField



%============================================================
% Degree and Major field — Degree name
%============================================================

\NewMemStore{DegreeMajorField}




%============================================================
% Minor field — Specialization
%============================================================

% 1. The Public Command
% s = star (*)                 <= only define if undefined
% r() = required ID in parens  <= the lang code
% m = mandatory value          <= the minor stufy field (e.g., Distributed and Parallel Computfing)
\NewMemStore{MinorField}
\NewDocumentCommand{\MinorField}{ s r() m }
  {
    % We pass the star status (boolean) and expanded arguments to the internal logic
    \__nt_command:neee { #1 } { MajorField } { #2 } { #3 }
  }
\let\Specialization\MinorField




\ExplSyntaxOff





\newdata{degreename}
\newdata{majorfield}
% --------------------------------------------------------
% Degree
  % #1 = lang
  % #2 = value
\def\ntmajorfield{\@ifstar{\@ntmajorfieldifundef}{\@ntmajorfield}}
\def\@ntmajorfieldifundef(#1)#2{\ifdatadefined{majorfield}(#1){}{\@ntmajorfield(#1){#2}}}
\def\@ntmajorfield(#1)#2{\majorfield(#1):={#2}}

\def\ntdegreename{\@ifstar{\@ntdegreenameifundef}{\@ntdegreename}}
\def\@ntdegreenameifundef(#1)#2{\ifdatadefined{degreename}(#1){}{\@ntdegreename(#1){#2}}}
\def\@ntdegreename(#1)#2{%
  % #1 = lang
  % #2 = value
  \datamatch{\match}{degreenameprefix}(%
            {\@DOCTYPE,\@DEGREEACR,\@LANG@COVER},%
            {\@DOCCLASS,\@DEGREEACR,\@LANG@COVER},%
            {\@DEGREEACR,\@LANG@COVER},%
            {\@DOCTYPE,\@LANG@COVER},%
            {\@DOCCLASS,\@LANG@COVER},%
            {\@LANG@COVER}%
  )%
  \ifblank{\match}{\degreename(#1):={#2}}{\degreename(#1):={\match\ #2}}%
  \majorfield(#1):={#2}%
}
% --------------------------------------------------------
% Specialization
\def\ntminorfield{\@ifstar{\@ntminorfieldifundef}{\@ntminorfield}}
\def\@ntminorfieldifundef(#1)#2{\ifdatadefined{minorfield}(#1){}{\@ntminorfield(#1){#2}}}
\def\@ntminorfield(#1)#2{\minorfield(#1):={#2}}

\def\ntspecialization{\@ifstar{\@ntspecializationifundef}{\@ntspecialization}}
\def\@ntspecializationifundef(#1)#2{\ifdatadefined{minorfield}(#1){}{\@ntspecialization(#1){#2}}}
\def\@ntspecialization(#1)#2{%
  \datamatch{\specmatch}{specializationString}(%
            {\@DOCTYPE,\@DEGREEACR,\@LANG@COVER},%
            {\@DOCCLASS,\@DEGREEACR,\@LANG@COVER}%
            {\@DEGREEACR,\@LANG@COVER},%
            {\@DOCTYPE,\@LANG@COVER},%
            {\@DOCCLASS,\@LANG@COVER},%
            {\@LANG@COVER}%
  )%
  \ifblank{\match}{\specialization(#1)={#2}}{\specialization(#1)={\specmatch\ #2}}%
  \minorfield(#1)={#2}%
}

% --------------------------------------------------------
% Sponsors
\def\ntsponsors(#1,#2,#3)#4{\sponsor(#3,#1,#2):={#2}}

% --------------------------------------------------------
% Title
\def\nttitle(#1,#2)#3{%
  % #1 = type (main, sub, spine) title
  % #2 = lang
  % #3 = value
  % \noexpandarg  
  % \StrSubstitute{#3}{\\}{ }[\@nt@cleantitle]
  % \typeout{XXXX [\@nt@cleantitle]}\aaa
  % \doctitle(#2,#1):={\@nt@cleantitle}%
  \csedef{doctitle-#2-#1}{\def\\{ }#3}%
  \doctitle(#2,#1):={\csuse{doctitle-#2-#1}}%
  \doctitle(#2,#1,cover):={#3}%
  \IfStrEq{#1}{main}{\doctitle(#2,spine):=?{\thedoctitle(#2,#1)}}{}%
  % \doctitle(#2,#1):={\ntnolinebreak{#3}}%
  % \doctitle(#2,#1,cover):={#3}%
  % \IfStrEq{#1}{main}{\doctitle(#2,spine):={\ntnolinebreak{#3}}}{}%
  \fullexpandarg
}

% \newcommand{\ntnolinebreak}[1]{{\def\\{\ }#1}}
% --------------------------------------------------------



%============================================================
% Date and month
%============================================================

% \babelmonthname{<1..12>} → localized month name (current babel language)
\newcommand{\babelmonthname}[1]{%
  \csname month\romannumeral\numexpr#1\relax name\endcsname
}

% \printisodate{2022-12-25} -> localized date, e.g., December 20, 2022; 20 de dezembro de 2022
% \printisodate{2022-12}    -> e.g., December 20, 2022; Dezembro, 2022
% \printisodate{2022}       -> e.g., 2022
\ExplSyntaxOn
\NewDocumentCommand{\printisodate}{ O{,~} m }
{
  \karl_print_isodate:nn { #1 } { #2 }
}

\cs_new_protected:Npn \karl_print_isodate:nn #1 #2
{
  \seq_set_split:Nnn \l_tmpa_seq { - } { #2 }
  \int_case:nnF { \seq_count:N \l_tmpa_seq }
  {
    { 1 } { \karl_print_isodate_year:n { #2 } }  % YYYY
    { 2 } { \karl_print_isodate_year_month:nn { #1 } { #2 } }  % YYYY-MM
    { 3 } { \karl_print_isodate_full:nnn { #2 } }  % YYYY-MM-DD
  }
  {
    \msg_error:nnx { printisodatex } { invalid-format } { #2 }
  }
}

\cs_new_protected:Npn \karl_print_isodate_year:n #1
{
  #1  % Just output the year
}

\cs_new_protected:Npn \karl_print_isodate_year_month:nn #1 #2
{
  \seq_set_split:Nnn \l_tmpa_seq { - } { #2 }
  \MakeTitlecase { \babelmonthname { \seq_item:Nn \l_tmpa_seq { 2 } } }
  #1  % separator
  \seq_item:Nn \l_tmpa_seq { 1 }  % year
}

\cs_new_protected:Npn \karl_print_isodate_full:nnn #1
{
  \seq_set_split:Nnn \l_tmpa_seq { - } { #1 }
  \localedate
    { \seq_item:Nn \l_tmpa_seq { 1 } }  % year
    { \seq_item:Nn \l_tmpa_seq { 2 } }  % month
    { \seq_item:Nn \l_tmpa_seq { 3 } }  % day
}

\msg_new:nnn { printisodatex } { invalid-format }
{
  Invalid~date~format~'#1'.~Expected~YYYY,~YYYY-MM,~or~YYYY-MM-DD.
}
\ExplSyntaxOff
% \newcommand{\printisodate}[2][, ]{\printisodate@i[#1]#2---\@nil}
%
% \def\printisodate@i[#1]#2-#3-#4-#5\@nil{%
%   % 1=$<$#1$>$ $<$#2$>$ $<$#3$>$ $<$#4$>$\par
%   \edef\@iso@one{#2}%
%   \edef\@iso@two{#3}%
%   \edef\@iso@three{#4}%
%   \ifx\@iso@three\@empty
%     \ifx\@iso@two\@empty
%       \@iso@one%
%     \else
%       \MakeTitlecase{\babelmonthname{\@iso@two}}#1\@iso@one%
%     \fi
%   \else
%     \localedate{\@iso@one}{\@iso@two}{\@iso@three}%
%   \fi
% }


\ExplSyntaxOn

% 1. Define the message
\msg_new:nnnn { date } { invalid-format }
  { Invalid~ISO~date~format:~'#1'. }
  { The~date~must~be~YYYY-MM~or~YYYY-MM-DD. }

% 2. The Public Entry Point
% We expand #1 and #2 immediately using the :ee variant
\NewDocumentCommand{\SetDateISO}{ d() m }
  {
    \__nova_process_iso_date:ee { #1 } { #2 }
  }

% 3. The Internal Logic
\tl_new:N \l_tmp_year_tl
\tl_new:N \l_tmp_month_tl

\cs_new_protected:Npn \__nova_process_iso_date:nn #1 #2
  {
    % Handle the case where #1 (the optional ID) is not provided
    \tl_set:Nn \l_tmpa_tl { #1 }
    \quark_if_no_value:NT \l_tmpa_tl { \tl_set:Nn \l_tmpa_tl { default } }

    % 1. Validate syntax on the expanded string #2
    \regex_match:nnTF { ^\d{4}-\d{2}(-\d{2})?$ } { #2 }
      {
        % 2. Split ISO string into a sequence
        \seq_set_split:Nnn \l_tmpa_seq { - } { #2 }
        
        % 3. Access components
        \tl_set:Nx \l_tmp_year_tl  { \seq_item:Nn \l_tmpa_seq { 1 } }
        \tl_set:Nx \l_tmp_month_tl { \seq_item:Nn \l_tmpa_seq { 2 } }
        
        % 4. Global/Main storage (using our resolved ID in \l_tmpa_tl)
        \MemSet{DocDate}{\l_tmpa_tl}{#2}
        \MemSet{DocDate}{\l_tmpa_tl,year}{\l_tmp_year_tl}
        \MemSet{DocDate}{\l_tmpa_tl,month}{\l_tmp_month_tl}
        
        % 5. Check if Day exists (Fixed: \int_compare:nNnTF)
        \int_compare:nNnTF { \seq_count:N \l_tmpa_seq } = { 3 }
          {
            \MemSet{DocDate}{\l_tmpa_tl,day}{ \int_eval:n { \seq_item:Nn \l_tmpa_seq { 3 } } }
          }
          {
            \MemSet{DocDate}{\l_tmpa_tl,day}{}
          }
        
        % 6. Call monthtotext
        \MemSet{DocDate}{\l_tmpa_tl,month,text}{ \monthtotext[\l_tmp_month_tl] }
      }
      { 
        \msg_error:nnn { date } { invalid-format } { #2 } 
      }
  }

% Define the 'ee' variant to force expansion of both arguments
\cs_generate_variant:Nn \__nova_process_iso_date:nn { ee }


% Month number to month name using babel
\cs_new:Npn \nova_month_to_text:n #1
  {
    % \int_eval:n ensures leading zeros (like 09) are handled correctly
    % \int_to_roman:n converts the number to lowercase roman (i, ii, iii...)
    % \use:c builds the control sequence name and executes it
    \use:c { month \int_to_roman:n { \int_eval:n { #1 } } name }
  }

\NewDocumentCommand{\monthtotext}{ O{\month} }
  {
    \nova_month_to_text:n { #1 }
  }

\ExplSyntaxOff



\NewMemStore{DocDate}

\let\ntdate\SetDateISO
\SetDateISO(submission){2000-01-31}
\SetDateISO(exam){2000-01-31}


%============================================================
% Author identification
%============================================================
\newdata{docauthor}
\docauthor(name):={Author Name}
\docauthor(name,short):={Author Short Name}
\docauthor(gender):={Author Gender}
\docauthor(degree,\@LANG@COVER):={Author Previous Degree}

\def\ntauthorname(#1)#2#3{% [m|f]{Long name}{Short name}
  \docauthor(gender):={#1}%
  \docauthor(name):={#2}%
  \docauthor(name,short):={#3}}

\def\ntauthordegree(#1)#2{\docauthor(degree,#1):={#2}}




%============================================================
% Setting cover defaults
%============================================================


% strings to be defined for each language
\nttitle(main,\@LANG@COVER){\thedefaultnttitle(\@LANG@COVER)}
\nttitle(sub,\@LANG@COVER){\thedefaultntsubtitle(\@LANG@COVER)}
\Department(\@LANG@COVER){\thedefaultntdepartment(\@LANG@COVER)}
\ntdegreename(\@LANG@COVER){\thedefaultntdegreename(\@LANG@COVER)}
\ntspecialization(\@LANG@COVER){\thedefaultntspecialization(\@LANG@COVER)}
\ntauthordegree(\@LANG@COVER){\thedefaultntauthordegree(\@LANG@COVER)}



%============================================================
% Adding list_of
\newcommand*{\ntaddlistof}[2][]{%
  % #1 = frontmatter, backmatter
  % #2 = the list of SOMETHING without the initial "\"
  \@ifmtarg{#1}{%
    \edef\@listofat{\option{/novathesis/print/otherlists}}%
  }{%
    \edef\@listofat{#1}%
  }
  % \typeout{\ISTOF 1=[\@listofat] 2=[#2]}\NTADDLISTOF%
  \IfStrEqCase{#2}{%
    {listoffigures*}{\options{/@nt/listof/\@listofat/.newpush={%
            \hypertarget{loftarget}{\listoffigures*}%
            \bookmark[dest=loftarget]{\listfigurename}%
    }}}%
    {listoffigures}{\options{/@nt/listof/\@listofat/.newpush={%
            \hypertarget{loftarget}{\listoffigures}%
            % \bookmark[dest=loftarget,level=1]{\listfigurename}%
    }}}%
    {listoftables*}{\options{/@nt/listof/\@listofat/.newpush={%
            \hypertarget{lottarget}{\listoftables*}%
            \bookmark[dest=lottarget]{\listtablename}%
    }}}%
    {listoftables}{\options{/@nt/listof/\@listofat/.newpush={%
            \hypertarget{lottarget}{\listoftables}%
            % \bookmark[dest=lottarget]{\listtablename}%
    }}}%
    {listoflistings}{\options{/@nt/listof/\@listofat/.newpush={%
            \hypertarget{loltarget}{\listoflistings}%
            \bookmark[dest=loltarget]{\listoflistingscaption}%
    }}}%
    {lstlistoflistings}{\options{/@nt/listof/\@listofat/.newpush={%
            \hypertarget{loltarget}{\lstlistoflistings}%
            % \bookmark[dest=loltarget]{\lstlistlistingname}%
    }}}%
    {listofalgorithms}{\options{/@nt/listof/\@listofat/.newpush = {%
            \listofalgorithms
            \ifdefined\listalgorithmname%
              \addcontentsline{toc}{chapter}{\listalgorithmname}%
            \else\ifdefined\listalgorithmcfname%
              \addcontentsline{toc}{chapter}{\listalgorithmcfname}%
            \else
              \ClassError{novathesis}{Can't make list of algorithms. Please report this problem in the “novathesis” github. Thanks!}{}%
            \fi\fi}}}%
  }[%
      \options{/@nt/listof/\@listofat/.newpush={\ifdefmacro{#2}{#2}{\csuse{#2}}}}%
   ]%
}

%============================================================
% Print document “parts/sections/regions”
\newcommand*{\ntprint}[1]{%
  \IfStrEqCase{#1}{%
    {frontcover}{%
          \thispagestyle{empty}%
          \pagestyle{empty}%
          \ntprintcovers%
    }%
    {frontmatter}{%
          \ntthesisfrontmatter% Before the main text (TOC, etc) — Roman page numbering
          \bookmarksetupnext{level=0}%
          \hypertarget{bmfrontmatter}{}%
          \bookmark[level=0,dest=bmfrontmatter]{\thebkmString(frontmatter,\@LANG@MAIN)}%
          \bookmarksetup{startatroot=false,level=1,keeplevel}%
          \ntprintlist{/@nt/print/#1}%
    }%
    {mainmatter}{%
          \ntthesismainmatter% Mainn text — Arabic page numbering
          \bookmarksetup{level=0}%
          \bookmarksetupnext{level=0}%
          \thispagestyle{novathesis@mainmatter}%
          \pagestyle{novathesis@mainmatter}%
          \ntprintlist{/@nt/print/#1}%
    }%
    {backmatter}{%
          \ntthesisbackmatter     % The back text — Arabic page numbering
          \bookmarksetup{level=0}%
          \bookmarksetupnext{level=0}%
          % \hypertarget{bmbackmatter}{}
          % \bookmark[level=0,dest=bmbackmatter1]{\thebkmString(backmatter,\@LANG@MAIN)}
          \ntprintlist{/@nt/print/#1}%
    }%
    {backcover}{%
          \bookmarksetup{level=0}%
          \thispagestyle{empty}%
          \pagestyle{empty}%
          \ntprintbackcover%
    }%
  }[\ifdefmacro{#1}{#1}{\csuse{ntprint#1}}]%
}

\newcommand*{\ntprintlist}[1]{%
  \optionlistdo{#1}{%
    \ifdefmacro{##1}{##1}{%     ##1 is undefined
      \ifcsmacro{ntprint##1}{%  \ntprint#1 is defined
        \NTRunHook{ntprint##1/pre}\csuse{ntprint##1}\NTRunHook{ntprint##1/post}%
      }{%                       \ntprint#1 is undefined
        \ifcsmacro{##1}{%       \##1 is defined
          \NTRunHook{##1/pre}\csuse{##1}\NTRunHook{##1/post}%
        }{%                     nothing is defined
          \ClassError{novathesis}{Invalid contents for frontmatter or mainmatter: [##1]}{}%
        }%
      }%
    }%
    % \clearforchapter%
    \ignorespaces%
  }%
}

\newcommand*{\ntsetprintorder}[2]{%
  % #1 = frontmatter, mainmatter
  % #2 = list
  % \typeout{[#1] [#2]}
  \option@setlist[;]{/@nt/print/#1}{#2}%
}

\newcommand*{\ntaddtoprintorder}[2]{%
  % #1 = frontmatter, mainmatter
  % #2 = list
  % \typeout{[#1] [#2]}
  \options{/@nt/print/#1/.push=#2}%
}

% \newcommand*{\ntremovefromprintorder}[2]{%
% % #1 = frontmatter, mainmatter
% % #2 =single item to remove
%   \@for\@nt@item:=#2\do{\options{/@nt/print/#1/.remove = {\@nt@item}}}}

\newcommand{\myprintglossaries}{%
  % ignore if no glossaries were defined
  \ifoptioncontains{/@nt/listtypes}{glossaries}{
    \ifoptionequal{/novathesis/print/glossaries}{off}
      {}{%
        \if@backmatter
          \def\@matter{backmatter}
        \else
          \def\@matter{frontmatter}
        \fi
        \IfStrEq{\option{/novathesis/print/glossaries}}{\@matter}{%
          \clearforchapter%
          \ntselectlang{\@LANG@MAIN}%
          \hypertarget{bmglossaries}{}%
          \bookmarksetupnext{level=0}%
          \bookmark[level=0,dest=bmglossaries]
                  {\thebkmString(glossaries,\@LANG@MAIN)}%
          \printglossaries
        }{}%
      }%
  }{}%
}

% --------------------------------------------------------
% DEFAULT VALUES FOR frontmatter AND mainmatter
\newdata{printorder}

\printorder(frontmatter,final):={%
  statement;       % The statement page
  copyright;       % (*) The copyright page
  dedicatory;      % (*) Print the dedicatory
  acknowledgements;% (*) Print the acknowledgments
  quote;           % (*) Print the quote
  abstracts;       % Print abstracts in multiple languages.
  aidisclose;      % AI disclosure statement
  alllistof;       % Print all the listof defined in “6_list_of.tex”
  myprintglossaries; % Print the Glossary, Acronyms, Symbols, etc…
}

\printorder(frontmatter,provisional):={%
  statement;       % The statement page
  copyright;       % (*) The copyright page
  dedicatory;      % (*) Print the dedicatory
  acknowledgements;% (*) Print the acknowledgments
  quote;           % (*) Print the quote
  abstracts;       % Print abstracts in multiple languages.
  aidisclose;      % AI disclosure statement
  alllistof;       % Print all the listof defined in “6_list_of.tex”
  myprintglossaries; % Print the Glossary, Acronyms, Symbols, etc…
}

\printorder(frontmatter,working):={%
  abstracts;       % Print abstracts in multiple languages.
  aidisclose;      % AI disclosure statement
  alllistof;       % Print all the listof defined in “6_list_of.tex”
  myprintglossaries; % Print the Glossary, Acronyms, Symbols, etc…
}

\printorder(mainmatter):={
  chapters;        % Print document chapters
}%

\ifoptionequal{/novathesis/print/webography}{}{%
  \printorder(backmatter):={
    bib;             % Print the bibliography.  Change to
     %    “bib[title=⟨title⟩]” to redefine the title!
    alllistof;       % Print all the listof defined in “6_list_of.tex”
    myprintglossaries; % Print the Glossary, Acronyms, Symbols, etc…
    appendices;      % Print appendices; if any!
    annexes;         % Print annexes; if any!
  }%
}{%
  \printorder(backmatter):={
    \printbibliography[nottype=online]; % Print the bibliography.
    \printbibliography[title=\option{/novathesis/print/webography},type=online]; % Print the bibliography.
    alllistof;       % Print all the listof defined in “6_list_of.tex”
    myprintglossaries; % Print the Glossary, Acronyms, Symbols, etc…
    appendices; % Print appendices, if any!
    annexes; % Print annexes, if any!
  }%
}
% \ifoptionequal{/novathesis/print/webography}{}{%
%   \ntsetprintorder{mainmatter}{
%     chapters;        % Print document chapters
%     bib;             % Print the bibliography.  Change to
%      %    “bib[title=⟨title⟩]” to redefine the title!
%     appendices;      % Print appendices; if any!
%     annexes;         % Print annexes; if any!
%   }%
% }{%
%   \ntsetprintorder{mainmatter}{
%     chapters; % Print document chapters
%     \printbibliography[nottype=online]; % Print the bibliography.
%     \printbibliography[title=\option{/novathesis/print/webography},type=online]; % Print the bibliography.
%     appendices; % Print appendices, if any!
%     annexes; % Print annexes, if any!
%   }%
% }


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
